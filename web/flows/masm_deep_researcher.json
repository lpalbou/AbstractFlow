{
  "id": "masm_deep_researcher",
  "name": "masm_deep_researcher",
  "description": "MASM role: Deep Researcher. Uses web tools to produce a concise research dossier + report + (optional) clarifications. No Python glue; outputs are strict JSON parsed by built-in nodes.",
  "nodes": [
    {
      "id": "node-1",
      "type": "on_flow_start",
      "position": { "x": -768.0, "y": 96.0 },
      "data": {
        "nodeType": "on_flow_start",
        "label": "On Flow Start",
        "icon": "&#x1F3C1;",
        "headerColor": "#C0392B",
        "inputs": [],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "request", "label": "request", "type": "string" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "skip_clarifications", "label": "skip_clarifications", "type": "boolean" },
          { "id": "max_web_search", "label": "max_web_search", "type": "number" },
          { "id": "max_fetch_url", "label": "max_fetch_url", "type": "number" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" }
        ],
        "pinDefaults": {
          "skip_clarifications": true,
          "max_web_search": 5,
          "max_fetch_url": 5,
          "max_iterations": 40
        }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-2",
      "type": "tools_allowlist",
      "position": { "x": -512.0, "y": 256.0 },
      "data": {
        "nodeType": "tools_allowlist",
        "label": "Research Tools",
        "icon": "&#x1F9F0;",
        "headerColor": "#FF8800",
        "inputs": [],
        "outputs": [{ "id": "tools", "label": "tools", "type": "array" }],
        "literalValue": ["web_search", "fetch_url"]
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-3",
      "type": "concat",
      "position": { "x": -512.0, "y": 96.0 },
      "data": {
        "nodeType": "concat",
        "label": "Research Task",
        "icon": "&#x2795;",
        "headerColor": "#E74C3C",
        "inputs": [
          { "id": "a", "label": "a", "type": "string" },
          { "id": "b", "label": "b", "type": "number" },
          { "id": "c", "label": "c", "type": "string" },
          { "id": "d", "label": "d", "type": "number" },
          { "id": "e", "label": "e", "type": "string" },
          { "id": "f", "label": "f", "type": "boolean" },
          { "id": "g", "label": "g", "type": "string" },
          { "id": "h", "label": "h", "type": "string" },
          { "id": "i", "label": "i", "type": "string" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "concatConfig": { "separator": "" },
        "pinDefaults": {
          "a": "You are the DEEP RESEARCHER.\n\nGoal: build a concise but high-signal research package for downstream planning.\n\nYou MAY use tools. Budgets:\n- max_web_search: ",
          "c": "\n- max_fetch_url: ",
          "e": "\n\nIf skip_clarifications is true, do NOT generate clarifying questions (set clarifications to empty).\n- skip_clarifications: ",
          "g": "\n\nUSER REQUEST:\n",
          "i": "\n\nReturn STRICT JSON only (no markdown). Schema:\n{\n  \"clarifications\": \"(string; may be empty)\",\n  \"dossier_md\": \"(markdown; include citations/URLs where possible)\",\n  \"report_md\": \"(markdown; polished summary for the user; cite where possible)\",\n  \"sources\": [\"(urls)\"]\n}\n"
        }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-4",
      "type": "agent",
      "position": { "x": -160.0, "y": 96.0 },
      "data": {
        "nodeType": "agent",
        "label": "Deep Research Agent",
        "icon": "&#x1F916;",
        "headerColor": "#4488FF",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "include_context", "label": "use_context", "type": "boolean" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" },
          { "id": "system", "label": "system", "type": "string" },
          { "id": "task", "label": "prompt", "type": "string" },
          { "id": "tools", "label": "tools", "type": "array" },
          { "id": "context", "label": "context", "type": "object" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "result", "label": "result", "type": "object" },
          { "id": "scratchpad", "label": "scratchpad", "type": "object" }
        ],
        "agentConfig": {
          "provider": "lmstudio",
          "model": "qwen/qwen3-next-80b",
          "max_iterations": 40
        },
        "pinDefaults": {
          "include_context": false,
          "system": "You are a rigorous deep researcher. Use tools only when needed. Cite sources. Be explicit about uncertainty."
        }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-5",
      "type": "break_object",
      "position": { "x": 96.0, "y": 96.0 },
      "data": {
        "nodeType": "break_object",
        "label": "Agent JSON",
        "icon": "&#x1F9E9;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "object", "label": "object", "type": "object" }],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "breakConfig": { "selectedPaths": ["result"] }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-6",
      "type": "parse_json",
      "position": { "x": 352.0, "y": 96.0 },
      "data": {
        "nodeType": "parse_json",
        "label": "Parse JSON",
        "icon": "&#x1F5C2;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "text", "label": "text", "type": "string" }],
        "outputs": [{ "id": "result", "label": "result", "type": "object" }]
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-7",
      "type": "break_object",
      "position": { "x": 608.0, "y": 96.0 },
      "data": {
        "nodeType": "break_object",
        "label": "Break Output",
        "icon": "&#x1F9E9;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "object", "label": "object", "type": "object" }],
        "outputs": [
          { "id": "clarifications", "label": "clarifications", "type": "string" },
          { "id": "dossier_md", "label": "dossier_md", "type": "string" },
          { "id": "report_md", "label": "report_md", "type": "string" },
          { "id": "sources", "label": "sources", "type": "array" }
        ],
        "breakConfig": { "selectedPaths": ["clarifications", "dossier_md", "report_md", "sources"] }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-8",
      "type": "on_flow_end",
      "position": { "x": 864.0, "y": 176.0 },
      "data": {
        "nodeType": "on_flow_end",
        "label": "On Flow End",
        "icon": "&#x23F9;",
        "headerColor": "#C0392B",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "report_md", "label": "report_md", "type": "string" },
          { "id": "dossier_md", "label": "dossier_md", "type": "string" },
          { "id": "clarifications", "label": "clarifications", "type": "string" },
          { "id": "sources", "label": "sources", "type": "array" }
        ],
        "outputs": []
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    }
  ],
  "edges": [
    { "id": "edge-1", "source": "node-1", "sourceHandle": "exec-out", "target": "node-4", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-2", "source": "node-1", "sourceHandle": "provider", "target": "node-4", "targetHandle": "provider", "animated": false },
    { "id": "edge-3", "source": "node-1", "sourceHandle": "model", "target": "node-4", "targetHandle": "model", "animated": false },
    { "id": "edge-4", "source": "node-1", "sourceHandle": "max_iterations", "target": "node-4", "targetHandle": "max_iterations", "animated": false },
    { "id": "edge-5", "source": "node-2", "sourceHandle": "tools", "target": "node-4", "targetHandle": "tools", "animated": false },
    { "id": "edge-6", "source": "node-3", "sourceHandle": "result", "target": "node-4", "targetHandle": "task", "animated": false },
    { "id": "edge-7", "source": "node-1", "sourceHandle": "max_web_search", "target": "node-3", "targetHandle": "b", "animated": false },
    { "id": "edge-8", "source": "node-1", "sourceHandle": "max_fetch_url", "target": "node-3", "targetHandle": "d", "animated": false },
    { "id": "edge-9", "source": "node-1", "sourceHandle": "skip_clarifications", "target": "node-3", "targetHandle": "f", "animated": false },
    { "id": "edge-10", "source": "node-1", "sourceHandle": "request", "target": "node-3", "targetHandle": "h", "animated": false },

    { "id": "edge-11", "source": "node-4", "sourceHandle": "result", "target": "node-5", "targetHandle": "object", "animated": false },
    { "id": "edge-12", "source": "node-5", "sourceHandle": "result", "target": "node-6", "targetHandle": "text", "animated": false },
    { "id": "edge-13", "source": "node-6", "sourceHandle": "result", "target": "node-7", "targetHandle": "object", "animated": false },

    { "id": "edge-14", "source": "node-4", "sourceHandle": "exec-out", "target": "node-8", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-15", "source": "node-7", "sourceHandle": "report_md", "target": "node-8", "targetHandle": "report_md", "animated": false },
    { "id": "edge-16", "source": "node-7", "sourceHandle": "dossier_md", "target": "node-8", "targetHandle": "dossier_md", "animated": false },
    { "id": "edge-17", "source": "node-7", "sourceHandle": "clarifications", "target": "node-8", "targetHandle": "clarifications", "animated": false },
    { "id": "edge-18", "source": "node-7", "sourceHandle": "sources", "target": "node-8", "targetHandle": "sources", "animated": false }
  ],
  "entryNode": "node-1",
  "created_at": "2026-01-04T00:00:00Z",
  "updated_at": "2026-01-04T00:00:00Z"
}


