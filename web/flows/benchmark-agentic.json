{
  "id": "be0a6c01",
  "name": "benchmark-agentic",
  "description": "Benchmark agentic autonomy across 10 system prompts with 3 repeats each, for both ReAct (agent node) and a CodeAct-style LLM/tool loop.",
  "interfaces": [],
  "nodes": [
    {
      "id": "node-1",
      "type": "on_flow_start",
      "position": { "x": -1696.0, "y": 176.0 },
      "data": {
        "nodeType": "on_flow_start",
        "label": "On Flow Start",
        "icon": "&#x1F3C1;",
        "headerColor": "#C0392B",
        "inputs": [],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "temperature", "label": "temperature", "type": "number" },
          { "id": "seed", "label": "seed", "type": "number" },
          { "id": "runs", "label": "runs", "type": "array" },
          { "id": "prompts", "label": "prompts", "type": "array" },
          { "id": "repeats", "label": "repeats", "type": "number" },
          { "id": "evaluator_temperature", "label": "evaluator_temperature", "type": "number" },
          { "id": "evaluator_seed", "label": "evaluator_seed", "type": "number" },
          { "id": "max_iterations_react", "label": "max_iterations_react", "type": "number" },
          { "id": "max_iterations_codeact", "label": "max_iterations_codeact", "type": "number" },
          { "id": "tools", "label": "tools", "type": "tools" }
        ],
        "pinDefaults": {
          "provider": "lmstudio",
          "model": "google_gemma-3-1b-it",
          "temperature": 0.7,
          "seed": 42,
          "runs": [],
          "repeats": 3,
          "evaluator_temperature": 0,
          "evaluator_seed": 0,
          "max_iterations_react": 12,
          "max_iterations_codeact": 16,
          "tools": ["list_files", "search_files", "read_file", "write_file", "edit_file", "analyze_code", "execute_command"],
          "prompts": [
            {
              "id": "p01",
              "label": "Baseline",
              "system": "You are an autonomous tool-using agent. Use tools, be truthful, and finish the task."
            },
            {
              "id": "p02",
              "label": "Plan‚ÜíAct‚ÜíVerify",
              "system": "You are a highly autonomous agent.\n\nOperating rules:\n- Plan briefly (2‚Äì6 steps), then execute.\n- Use tools for facts; never guess file contents.\n- Verify your result before finalizing.\n- When multiple tool calls are independent, batch them in the same tool step.\n- Do not ask the user what to do next; complete the task end-to-end."
            },
            {
              "id": "p03",
              "label": "Parallel-First Executor",
              "system": "You are an autonomy-maximizing tool agent.\n\nKey behavior:\n- Identify independent sub-tasks and run them in parallel tool batches when safe.\n- Prefer one tool step with multiple independent calls over many single-call steps.\n- Keep a short state of what you know vs. what you still need.\n- If a tool fails, recover: inspect error, fix args, retry.\n- Finish with the requested output."
            },
            {
              "id": "p04",
              "label": "Evidence Ledger",
              "system": "You are an autonomous agent that keeps an evidence ledger.\n\nRules:\n- Every factual claim must be grounded in tool output.\n- Maintain a compact ledger: inputs read, computed intermediates, final result.\n- Batch independent tool calls when possible.\n- If information is missing, get it with tools; do not ask the user.\n- Produce the final answer once the ledger is complete."
            },
            {
              "id": "p05",
              "label": "Fast & Correct",
              "system": "You are an autonomous agent optimized for fast, correct task completion.\n\nPriorities:\n1) Correctness\n2) Minimal iterations\n3) Safe parallel tool batching\n\nGuidelines:\n- Read only what you need, but do not guess.\n- Batch independent reads/inspections in a single tool step.\n- Avoid redundant tool calls.\n- Stop as soon as you can produce the correct final output."
            },
            {
              "id": "p06",
              "label": "Error-Resilient Autonomy",
              "system": "You are an autonomous agent that is resilient to tool errors.\n\nRules:\n- Expect occasional tool failures.\n- When a tool call fails, diagnose and retry with corrected arguments.\n- Keep momentum: do not ask the user for guidance.\n- Use parallel tool batching only for independent operations.\n- Verify the final result with a quick sanity check."
            },
            {
              "id": "p07",
              "label": "Minimal Questions (No-Ask)",
              "system": "You are an autonomous agent.\n\nConstraints:\n- Do not ask the user questions.\n- Use tools to resolve uncertainty.\n- If multiple independent tool calls are needed, batch them.\n- Be concise and finish the task end-to-end.\n- If something is impossible with available tools, explain why and stop."
            },
            {
              "id": "p08",
              "label": "Structured Operator",
              "system": "You are an autonomous tool-using operator.\n\nProcess:\n- Decompose into small actionable steps.\n- Execute the next step using tools.\n- Keep a running state (inputs, derived values, remaining needs).\n- Batch independent tool calls.\n- Finalize with exactly the requested output."
            },
            {
              "id": "p09",
              "label": "Verifier Mindset",
              "system": "You are an autonomous agent with a verifier mindset.\n\nRules:\n- Use tools to gather evidence and compute results.\n- Before finalizing, cross-check: totals, ordering rules, and constraints.\n- Prefer parallel tool batches for independent reads.\n- Avoid unnecessary extra steps.\n- Finish with the correct final output."
            },
            {
              "id": "p10",
              "label": "Autonomy + Parallelism Coach",
              "system": "You are an autonomous agent.\n\nCoaching rules:\n- First, decide what information must be fetched.\n- Group independent tool calls into as few batches as possible.\n- After tool results, compute and verify.\n- Do not ask the user what to do; act.\n- Produce the final answer when ready."
            }
          ]
        }
      }
    },
    {
      "id": "node-2",
      "type": "code",
      "position": { "x": -1472.0, "y": 176.0 },
      "data": {
        "nodeType": "code",
        "label": "Compute effective_runs",
        "icon": "&#x1F40D;",
        "headerColor": "#9B59B6",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "runs", "label": "runs", "type": "array" },
          { "id": "temperature", "label": "temperature", "type": "number" },
          { "id": "seed", "label": "seed", "type": "number" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "output", "label": "output", "type": "array" }
        ],
        "codeBody": "return out\n",
        "code": "def transform(_input):\n    runs = _input.get(\"runs\")\n    out = []\n\n    if isinstance(runs, list) and len(runs) > 0:\n        for r_any in runs:\n            r = r_any if isinstance(r_any, dict) else None\n            if r is None:\n                continue\n            label = str(r.get(\"label\") or r.get(\"id\") or \"\").strip() or \"run\"\n            out.append(\n                {\n                    \"label\": label,\n                    \"temperature\": r.get(\"temperature\"),\n                    \"seed\": r.get(\"seed\"),\n                }\n            )\n\n    if len(out) > 0:\n        return out\n\n    return [\n        {\n            \"label\": \"default\",\n            \"temperature\": _input.get(\"temperature\"),\n            \"seed\": _input.get(\"seed\"),\n        }\n    ]\n",
        "functionName": "transform"
      }
    },
    {
      "id": "node-3",
      "type": "code",
      "position": { "x": -1248.0, "y": 176.0 },
      "data": {
        "nodeType": "code",
        "label": "Build repeats_array",
        "icon": "&#x1F40D;",
        "headerColor": "#9B59B6",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "repeats", "label": "repeats", "type": "number" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "output", "label": "output", "type": "array" }
        ],
        "codeBody": "return items\n",
        "code": "def transform(_input):\n    raw = _input.get(\"repeats\")\n    try:\n        n = int(float(raw))\n    except Exception:\n        n = 3\n    if n < 1:\n        n = 1\n    if n > 20:\n        n = 20\n\n    items = []\n    for i in range(1, n + 1):\n        items.append(i)\n    return items\n",
        "functionName": "transform"
      }
    },
    {
      "id": "node-4",
      "type": "var_decl",
      "position": { "x": -1248.0, "y": 352.0 },
      "data": {
        "nodeType": "var_decl",
        "label": "Variable",
        "icon": "ùë•",
        "headerColor": "#16A085",
        "inputs": [],
        "outputs": [
          { "id": "name", "label": "name", "type": "string" },
          { "id": "value", "label": "value", "type": "array" }
        ],
        "literalValue": { "name": "run_results", "type": "array", "default": [] }
      }
    },
    {
      "id": "node-5",
      "type": "loop",
      "position": { "x": -1008.0, "y": 176.0 },
      "data": {
        "nodeType": "loop",
        "label": "ForEach runs",
        "icon": "&#x1F501;",
        "headerColor": "#F39C12",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "items", "label": "items", "type": "array" }
        ],
        "outputs": [
          { "id": "loop", "label": "loop", "type": "execution" },
          { "id": "done", "label": "done", "type": "execution" },
          { "id": "item", "label": "item", "type": "any" },
          { "id": "index", "label": "index", "type": "number" }
        ]
      }
    },
    {
      "id": "node-6",
      "type": "get",
      "position": { "x": -784.0, "y": 64.0 },
      "data": {
        "nodeType": "get",
        "label": "Get run label",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "label", "default": "run" }
      }
    },
    {
      "id": "node-7",
      "type": "get",
      "position": { "x": -784.0, "y": 160.0 },
      "data": {
        "nodeType": "get",
        "label": "Get run temperature",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "temperature", "default": 0.7 }
      }
    },
    {
      "id": "node-8",
      "type": "get",
      "position": { "x": -784.0, "y": 256.0 },
      "data": {
        "nodeType": "get",
        "label": "Get run seed",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "seed", "default": 42 }
      }
    },
    {
      "id": "node-9",
      "type": "loop",
      "position": { "x": -560.0, "y": 176.0 },
      "data": {
        "nodeType": "loop",
        "label": "ForEach prompts",
        "icon": "&#x1F501;",
        "headerColor": "#F39C12",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "items", "label": "items", "type": "array" }
        ],
        "outputs": [
          { "id": "loop", "label": "loop", "type": "execution" },
          { "id": "done", "label": "done", "type": "execution" },
          { "id": "item", "label": "item", "type": "any" },
          { "id": "index", "label": "index", "type": "number" }
        ]
      }
    },
    {
      "id": "node-10",
      "type": "get",
      "position": { "x": -336.0, "y": 48.0 },
      "data": {
        "nodeType": "get",
        "label": "Get prompt id",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "id", "default": "pXX" }
      }
    },
    {
      "id": "node-11",
      "type": "get",
      "position": { "x": -336.0, "y": 144.0 },
      "data": {
        "nodeType": "get",
        "label": "Get prompt label",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "label", "default": "Prompt" }
      }
    },
    {
      "id": "node-12",
      "type": "get",
      "position": { "x": -336.0, "y": 240.0 },
      "data": {
        "nodeType": "get",
        "label": "Get system prompt",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "system", "default": "" }
      }
    },
    {
      "id": "node-13",
      "type": "loop",
      "position": { "x": -112.0, "y": 176.0 },
      "data": {
        "nodeType": "loop",
        "label": "ForEach repeats",
        "icon": "&#x1F501;",
        "headerColor": "#F39C12",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "items", "label": "items", "type": "array" }
        ],
        "outputs": [
          { "id": "loop", "label": "loop", "type": "execution" },
          { "id": "done", "label": "done", "type": "execution" },
          { "id": "item", "label": "item", "type": "any" },
          { "id": "index", "label": "index", "type": "number" }
        ]
      }
    },
    {
      "id": "node-14",
      "type": "subflow",
      "position": { "x": 128.0, "y": 80.0 },
      "data": {
        "nodeType": "subflow",
        "label": "ReAct run",
        "icon": "&#x1F4E6;",
        "headerColor": "#00CCCC",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "inherit_context", "label": "inherit_context", "type": "boolean" },
          { "id": "prompt_id", "label": "prompt_id", "type": "string" },
          { "id": "prompt_label", "label": "prompt_label", "type": "string" },
          { "id": "repeat", "label": "repeat", "type": "number" },
          { "id": "system_prompt", "label": "system_prompt", "type": "string" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "temperature", "label": "temperature", "type": "number" },
          { "id": "seed", "label": "seed", "type": "number" },
          { "id": "evaluator_temperature", "label": "evaluator_temperature", "type": "number" },
          { "id": "evaluator_seed", "label": "evaluator_seed", "type": "number" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" },
          { "id": "tools", "label": "tools", "type": "tools" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "record", "label": "record", "type": "object" }
        ],
        "subflowId": "be0a6c02",
        "pinDefaults": { "inherit_context": false }
      }
    },
    {
      "id": "node-15",
      "type": "get_var",
      "position": { "x": 368.0, "y": 16.0 },
      "data": {
        "nodeType": "get_var",
        "label": "Get run_results",
        "icon": "&#x1F4E5;",
        "headerColor": "#16A085",
        "inputs": [{ "id": "name", "label": "name", "type": "string" }],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "name": "run_results" }
      }
    },
    {
      "id": "node-16",
      "type": "array_append",
      "position": { "x": 592.0, "y": 16.0 },
      "data": {
        "nodeType": "array_append",
        "label": "Append react record",
        "icon": "&#x2795;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "array", "label": "array", "type": "array" },
          { "id": "item", "label": "item", "type": "any" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "array" }]
      }
    },
    {
      "id": "node-17",
      "type": "set_var",
      "position": { "x": 816.0, "y": 16.0 },
      "data": {
        "nodeType": "set_var",
        "label": "Set run_results",
        "icon": "&#x1F4E4;",
        "headerColor": "#16A085",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "name", "label": "name", "type": "string" },
          { "id": "value", "label": "value", "type": "any" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "value", "label": "value", "type": "any" }
        ],
        "pinDefaults": { "name": "run_results" }
      }
    },
    {
      "id": "node-18",
      "type": "subflow",
      "position": { "x": 128.0, "y": 272.0 },
      "data": {
        "nodeType": "subflow",
        "label": "CodeAct run",
        "icon": "&#x1F4E6;",
        "headerColor": "#00CCCC",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "inherit_context", "label": "inherit_context", "type": "boolean" },
          { "id": "prompt_id", "label": "prompt_id", "type": "string" },
          { "id": "prompt_label", "label": "prompt_label", "type": "string" },
          { "id": "repeat", "label": "repeat", "type": "number" },
          { "id": "system_prompt", "label": "system_prompt", "type": "string" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "temperature", "label": "temperature", "type": "number" },
          { "id": "seed", "label": "seed", "type": "number" },
          { "id": "evaluator_temperature", "label": "evaluator_temperature", "type": "number" },
          { "id": "evaluator_seed", "label": "evaluator_seed", "type": "number" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" },
          { "id": "tools", "label": "tools", "type": "tools" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "record", "label": "record", "type": "object" }
        ],
        "subflowId": "be0a6c03",
        "pinDefaults": { "inherit_context": false }
      }
    },
    {
      "id": "node-19",
      "type": "get_var",
      "position": { "x": 368.0, "y": 208.0 },
      "data": {
        "nodeType": "get_var",
        "label": "Get run_results",
        "icon": "&#x1F4E5;",
        "headerColor": "#16A085",
        "inputs": [{ "id": "name", "label": "name", "type": "string" }],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "name": "run_results" }
      }
    },
    {
      "id": "node-20",
      "type": "array_append",
      "position": { "x": 592.0, "y": 208.0 },
      "data": {
        "nodeType": "array_append",
        "label": "Append codeact record",
        "icon": "&#x2795;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "array", "label": "array", "type": "array" },
          { "id": "item", "label": "item", "type": "any" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "array" }]
      }
    },
    {
      "id": "node-21",
      "type": "set_var",
      "position": { "x": 816.0, "y": 208.0 },
      "data": {
        "nodeType": "set_var",
        "label": "Set run_results",
        "icon": "&#x1F4E4;",
        "headerColor": "#16A085",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "name", "label": "name", "type": "string" },
          { "id": "value", "label": "value", "type": "any" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "value", "label": "value", "type": "any" }
        ],
        "pinDefaults": { "name": "run_results" }
      }
    },
    {
      "id": "node-22",
      "type": "get_var",
      "position": { "x": -336.0, "y": 528.0 },
      "data": {
        "nodeType": "get_var",
        "label": "Get run_results",
        "icon": "&#x1F4E5;",
        "headerColor": "#16A085",
        "inputs": [{ "id": "name", "label": "name", "type": "string" }],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "name": "run_results" }
      }
    },
    {
      "id": "node-23",
      "type": "code",
      "position": { "x": -112.0, "y": 528.0 },
      "data": {
        "nodeType": "code",
        "label": "Aggregate + Rank",
        "icon": "&#x1F40D;",
        "headerColor": "#9B59B6",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "run_results", "label": "run_results", "type": "array" },
          { "id": "prompts", "label": "prompts", "type": "array" },
          { "id": "runs", "label": "runs", "type": "array" },
          { "id": "repeats", "label": "repeats", "type": "number" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "output", "label": "output", "type": "object" }
        ],
        "codeBody": "return out\n",
        "code": "def transform(_input):\n    def _as_list(v):\n        return v if isinstance(v, list) else []\n\n    def _as_dict(v):\n        return v if isinstance(v, dict) else {}\n\n    def _as_int(v, default=0):\n        try:\n            if v is None or isinstance(v, bool):\n                return default\n            return int(float(v))\n        except Exception:\n            return default\n\n    run_results = _as_list(_input.get(\"run_results\"))\n    prompts = _as_list(_input.get(\"prompts\"))\n\n    repeats = _as_int(_input.get(\"repeats\"), 3)\n    if repeats < 1:\n        repeats = 1\n\n    prompt_meta = {}\n    for p_any in prompts:\n        p = p_any if isinstance(p_any, dict) else None\n        if p is None:\n            continue\n        pid = str(p.get(\"id\") or \"\").strip()\n        if not pid:\n            continue\n        prompt_meta[pid] = {\"label\": str(p.get(\"label\") or pid)}\n\n    # Group by (prompt_id, mode, temp, seed)\n    groups = {}\n\n    for rec_any in run_results:\n        rec = rec_any if isinstance(rec_any, dict) else None\n        if rec is None:\n            continue\n\n        pid = str(rec.get(\"prompt_id\") or \"\").strip()\n        mode = str(rec.get(\"mode\") or \"\").strip() or \"unknown\"\n        cfg = _as_dict(rec.get(\"config\"))\n        temp = cfg.get(\"temperature\")\n        seed = cfg.get(\"seed\")\n        run_key = \"t\" + str(temp) + \"_s\" + str(seed)\n\n        key = (pid, mode, run_key)\n        g = groups.get(key)\n        if g is None:\n            g = {\n                \"prompt_id\": pid,\n                \"prompt_label\": str(rec.get(\"prompt_label\") or prompt_meta.get(pid, {}).get(\"label\") or pid),\n                \"mode\": mode,\n                \"run_key\": run_key,\n                \"n\": 0,\n                \"correct\": 0,\n                \"signatures\": {},\n                \"sum\": {\n                    \"llm_calls\": 0,\n                    \"tool_batches\": 0,\n                    \"tool_calls\": 0,\n                    \"multi_tool_batches\": 0,\n                    \"tool_errors\": 0,\n                    \"max_tools_per_batch\": 0,\n                },\n            }\n            groups[key] = g\n\n        g[\"n\"] += 1\n        if rec.get(\"correct\") is True:\n            g[\"correct\"] += 1\n\n        sig = str(rec.get(\"signature\") or \"\")\n        g[\"signatures\"][sig] = True\n\n        m = _as_dict(rec.get(\"metrics\"))\n        g[\"sum\"][\"llm_calls\"] += _as_int(m.get(\"llm_calls\"), 0)\n        g[\"sum\"][\"tool_batches\"] += _as_int(m.get(\"tool_batches\"), 0)\n        g[\"sum\"][\"tool_calls\"] += _as_int(m.get(\"tool_calls\"), 0)\n        g[\"sum\"][\"multi_tool_batches\"] += _as_int(m.get(\"multi_tool_batches\"), 0)\n        g[\"sum\"][\"tool_errors\"] += _as_int(m.get(\"tool_errors\"), 0)\n        mtpb = _as_int(m.get(\"max_tools_per_batch\"), 0)\n        if mtpb > g[\"sum\"][\"max_tools_per_batch\"]:\n            g[\"sum\"][\"max_tools_per_batch\"] = mtpb\n\n    group_summaries = []\n    for key, g in groups.items():\n        n = _as_int(g.get(\"n\"), 0)\n        if n <= 0:\n            continue\n        correct = _as_int(g.get(\"correct\"), 0)\n        sig_variants = len(list(_as_dict(g.get(\"signatures\")).keys()))\n\n        sums = _as_dict(g.get(\"sum\"))\n        avg = {\n            \"llm_calls\": float(sums.get(\"llm_calls\", 0)) / float(n),\n            \"tool_batches\": float(sums.get(\"tool_batches\", 0)) / float(n),\n            \"tool_calls\": float(sums.get(\"tool_calls\", 0)) / float(n),\n            \"multi_tool_batches\": float(sums.get(\"multi_tool_batches\", 0)) / float(n),\n            \"tool_errors\": float(sums.get(\"tool_errors\", 0)) / float(n),\n            \"max_tools_per_batch\": float(sums.get(\"max_tools_per_batch\", 0)),\n        }\n\n        # Simple heuristic score: success >> reproducibility >> parallel tool batching\n        score = 0.0\n        score += float(correct) * 100.0\n        score -= float(max(0, sig_variants - 1)) * 10.0\n        score -= float(sums.get(\"tool_errors\", 0)) * 2.0\n        score += float(sums.get(\"multi_tool_batches\", 0)) * 1.0\n\n        group_summaries.append(\n            {\n                \"prompt_id\": g.get(\"prompt_id\"),\n                \"prompt_label\": g.get(\"prompt_label\"),\n                \"mode\": g.get(\"mode\"),\n                \"run_key\": g.get(\"run_key\"),\n                \"n\": n,\n                \"correct\": correct,\n                \"sig_variants\": sig_variants,\n                \"avg\": avg,\n                \"score\": score,\n            }\n        )\n\n    def _sort_key(x):\n        try:\n            return (-float(x.get(\"score\", 0.0)), -int(x.get(\"correct\", 0)), int(x.get(\"sig_variants\", 999)))\n        except Exception:\n            return (0, 0, 0)\n\n    group_summaries_sorted = sorted(group_summaries, key=_sort_key)\n\n    # Build top rankings per mode.\n    rankings = {\"react\": [], \"codeact\": [], \"combined\": []}\n\n    by_mode = {\"react\": [], \"codeact\": []}\n    for g in group_summaries_sorted:\n        mode = str(g.get(\"mode\") or \"\")\n        if mode in by_mode:\n            by_mode[mode].append(g)\n\n    rankings[\"react\"] = by_mode[\"react\"][0:10]\n    rankings[\"codeact\"] = by_mode[\"codeact\"][0:10]\n\n    # Combined score per prompt_id across modes and run_keys.\n    combined = {}\n    for g in group_summaries:\n        pid = str(g.get(\"prompt_id\") or \"\")\n        if not pid:\n            continue\n        c = combined.get(pid)\n        if c is None:\n            c = {\n                \"prompt_id\": pid,\n                \"prompt_label\": str(g.get(\"prompt_label\") or pid),\n                \"score\": 0.0,\n                \"correct\": 0,\n                \"n\": 0,\n                \"sig_variants\": 0,\n            }\n            combined[pid] = c\n        c[\"score\"] += float(g.get(\"score\", 0.0))\n        c[\"correct\"] += _as_int(g.get(\"correct\"), 0)\n        c[\"n\"] += _as_int(g.get(\"n\"), 0)\n        c[\"sig_variants\"] += _as_int(g.get(\"sig_variants\"), 0)\n\n    combined_list = list(combined.values())\n    combined_sorted = sorted(combined_list, key=lambda x: (-float(x.get(\"score\", 0.0)), -int(x.get(\"correct\", 0))))\n    rankings[\"combined\"] = combined_sorted[0:10]\n\n    # Report markdown\n    lines = []\n    lines.append(\"# Agentic Autonomy Benchmark\")\n    lines.append(\"\")\n    lines.append(f\"Runs recorded: {len(run_results)}\")\n    lines.append(\"\")\n    lines.append(\"## Top Prompts (Combined)\")\n    for i, r in enumerate(rankings[\"combined\"]):\n        lines.append(\n            f\"{i+1}. {r.get('prompt_id')} ‚Äî {r.get('prompt_label')} (score={r.get('score'):.1f}, correct={r.get('correct')}/{r.get('n')})\"\n        )\n\n    lines.append(\"\")\n    lines.append(\"## Top Prompts (ReAct)\")\n    for i, r in enumerate(rankings[\"react\"]):\n        lines.append(\n            f\"{i+1}. {r.get('prompt_id')} ‚Äî {r.get('prompt_label')} [{r.get('run_key')}] (score={r.get('score'):.1f}, correct={r.get('correct')}/{r.get('n')}, sig_variants={r.get('sig_variants')}, avg_tool_calls={r.get('avg',{}).get('tool_calls'):.2f})\"\n        )\n\n    lines.append(\"\")\n    lines.append(\"## Top Prompts (CodeAct)\")\n    for i, r in enumerate(rankings[\"codeact\"]):\n        lines.append(\n            f\"{i+1}. {r.get('prompt_id')} ‚Äî {r.get('prompt_label')} [{r.get('run_key')}] (score={r.get('score'):.1f}, correct={r.get('correct')}/{r.get('n')}, sig_variants={r.get('sig_variants')}, avg_tool_calls={r.get('avg',{}).get('tool_calls'):.2f})\"\n        )\n\n    report_markdown = \"\\n\".join(lines) + \"\\n\"\n\n    out = {\n        \"meta\": {\n            \"repeats\": repeats,\n            \"n_prompts\": len(prompts),\n            \"n_records\": len(run_results),\n        },\n        \"group_summaries\": group_summaries_sorted,\n        \"rankings\": rankings,\n        \"report_markdown\": report_markdown,\n    }\n\n    return out\n",
        "functionName": "transform"
      }
    },
    {
      "id": "node-24",
      "type": "get",
      "position": { "x": 128.0, "y": 528.0 },
      "data": {
        "nodeType": "get",
        "label": "Get report_markdown",
        "icon": "&#x1F4E5;",
        "headerColor": "#3498DB",
        "inputs": [
          { "id": "object", "label": "object", "type": "object" },
          { "id": "key", "label": "key", "type": "string" },
          { "id": "default", "label": "default", "type": "any" }
        ],
        "outputs": [{ "id": "value", "label": "value", "type": "any" }],
        "pinDefaults": { "key": "report_markdown", "default": "" }
      }
    },
    {
      "id": "node-25",
      "type": "on_flow_end",
      "position": { "x": 368.0, "y": 528.0 },
      "data": {
        "nodeType": "on_flow_end",
        "label": "On Flow End",
        "icon": "&#x23F9;",
        "headerColor": "#C0392B",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "report", "label": "report", "type": "string" },
          { "id": "summary", "label": "summary", "type": "object" },
          { "id": "run_results", "label": "run_results", "type": "array" }
        ],
        "outputs": []
      }
    }
  ],
  "edges": [
    { "id": "edge-1", "source": "node-1", "sourceHandle": "exec-out", "target": "node-2", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-2", "source": "node-1", "sourceHandle": "runs", "target": "node-2", "targetHandle": "runs", "animated": false },
    { "id": "edge-3", "source": "node-1", "sourceHandle": "temperature", "target": "node-2", "targetHandle": "temperature", "animated": false },
    { "id": "edge-4", "source": "node-1", "sourceHandle": "seed", "target": "node-2", "targetHandle": "seed", "animated": false },

    { "id": "edge-5", "source": "node-2", "sourceHandle": "exec-out", "target": "node-3", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-6", "source": "node-1", "sourceHandle": "repeats", "target": "node-3", "targetHandle": "repeats", "animated": false },

    { "id": "edge-7", "source": "node-3", "sourceHandle": "exec-out", "target": "node-5", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-8", "source": "node-2", "sourceHandle": "output", "target": "node-5", "targetHandle": "items", "animated": false },

    { "id": "edge-9", "source": "node-5", "sourceHandle": "item", "target": "node-6", "targetHandle": "object", "animated": false },
    { "id": "edge-10", "source": "node-5", "sourceHandle": "item", "target": "node-7", "targetHandle": "object", "animated": false },
    { "id": "edge-11", "source": "node-5", "sourceHandle": "item", "target": "node-8", "targetHandle": "object", "animated": false },

    { "id": "edge-12", "source": "node-5", "sourceHandle": "loop", "target": "node-9", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-13", "source": "node-1", "sourceHandle": "prompts", "target": "node-9", "targetHandle": "items", "animated": false },

    { "id": "edge-14", "source": "node-9", "sourceHandle": "item", "target": "node-10", "targetHandle": "object", "animated": false },
    { "id": "edge-15", "source": "node-9", "sourceHandle": "item", "target": "node-11", "targetHandle": "object", "animated": false },
    { "id": "edge-16", "source": "node-9", "sourceHandle": "item", "target": "node-12", "targetHandle": "object", "animated": false },

    { "id": "edge-17", "source": "node-9", "sourceHandle": "loop", "target": "node-13", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-18", "source": "node-3", "sourceHandle": "output", "target": "node-13", "targetHandle": "items", "animated": false },

    { "id": "edge-19", "source": "node-13", "sourceHandle": "loop", "target": "node-14", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-20", "source": "node-10", "sourceHandle": "value", "target": "node-14", "targetHandle": "prompt_id", "animated": false },
    { "id": "edge-21", "source": "node-11", "sourceHandle": "value", "target": "node-14", "targetHandle": "prompt_label", "animated": false },
    { "id": "edge-22", "source": "node-13", "sourceHandle": "item", "target": "node-14", "targetHandle": "repeat", "animated": false },
    { "id": "edge-23", "source": "node-12", "sourceHandle": "value", "target": "node-14", "targetHandle": "system_prompt", "animated": false },
    { "id": "edge-24", "source": "node-1", "sourceHandle": "provider", "target": "node-14", "targetHandle": "provider", "animated": false },
    { "id": "edge-25", "source": "node-1", "sourceHandle": "model", "target": "node-14", "targetHandle": "model", "animated": false },
    { "id": "edge-26", "source": "node-7", "sourceHandle": "value", "target": "node-14", "targetHandle": "temperature", "animated": false },
    { "id": "edge-27", "source": "node-8", "sourceHandle": "value", "target": "node-14", "targetHandle": "seed", "animated": false },
    { "id": "edge-28", "source": "node-1", "sourceHandle": "evaluator_temperature", "target": "node-14", "targetHandle": "evaluator_temperature", "animated": false },
    { "id": "edge-29", "source": "node-1", "sourceHandle": "evaluator_seed", "target": "node-14", "targetHandle": "evaluator_seed", "animated": false },
    { "id": "edge-30", "source": "node-1", "sourceHandle": "max_iterations_react", "target": "node-14", "targetHandle": "max_iterations", "animated": false },
    { "id": "edge-31", "source": "node-1", "sourceHandle": "tools", "target": "node-14", "targetHandle": "tools", "animated": false },

    { "id": "edge-32", "source": "node-14", "sourceHandle": "record", "target": "node-16", "targetHandle": "item", "animated": false },
    { "id": "edge-33", "source": "node-15", "sourceHandle": "value", "target": "node-16", "targetHandle": "array", "animated": false },
    { "id": "edge-34", "source": "node-14", "sourceHandle": "exec-out", "target": "node-17", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-35", "source": "node-16", "sourceHandle": "result", "target": "node-17", "targetHandle": "value", "animated": false },

    { "id": "edge-36", "source": "node-17", "sourceHandle": "exec-out", "target": "node-18", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-37", "source": "node-10", "sourceHandle": "value", "target": "node-18", "targetHandle": "prompt_id", "animated": false },
    { "id": "edge-38", "source": "node-11", "sourceHandle": "value", "target": "node-18", "targetHandle": "prompt_label", "animated": false },
    { "id": "edge-39", "source": "node-13", "sourceHandle": "item", "target": "node-18", "targetHandle": "repeat", "animated": false },
    { "id": "edge-40", "source": "node-12", "sourceHandle": "value", "target": "node-18", "targetHandle": "system_prompt", "animated": false },
    { "id": "edge-41", "source": "node-1", "sourceHandle": "provider", "target": "node-18", "targetHandle": "provider", "animated": false },
    { "id": "edge-42", "source": "node-1", "sourceHandle": "model", "target": "node-18", "targetHandle": "model", "animated": false },
    { "id": "edge-43", "source": "node-7", "sourceHandle": "value", "target": "node-18", "targetHandle": "temperature", "animated": false },
    { "id": "edge-44", "source": "node-8", "sourceHandle": "value", "target": "node-18", "targetHandle": "seed", "animated": false },
    { "id": "edge-45", "source": "node-1", "sourceHandle": "evaluator_temperature", "target": "node-18", "targetHandle": "evaluator_temperature", "animated": false },
    { "id": "edge-46", "source": "node-1", "sourceHandle": "evaluator_seed", "target": "node-18", "targetHandle": "evaluator_seed", "animated": false },
    { "id": "edge-47", "source": "node-1", "sourceHandle": "max_iterations_codeact", "target": "node-18", "targetHandle": "max_iterations", "animated": false },
    { "id": "edge-48", "source": "node-1", "sourceHandle": "tools", "target": "node-18", "targetHandle": "tools", "animated": false },

    { "id": "edge-49", "source": "node-18", "sourceHandle": "record", "target": "node-20", "targetHandle": "item", "animated": false },
    { "id": "edge-50", "source": "node-19", "sourceHandle": "value", "target": "node-20", "targetHandle": "array", "animated": false },
    { "id": "edge-51", "source": "node-18", "sourceHandle": "exec-out", "target": "node-21", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-52", "source": "node-20", "sourceHandle": "result", "target": "node-21", "targetHandle": "value", "animated": false },

    { "id": "edge-53", "source": "node-5", "sourceHandle": "done", "target": "node-23", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-54", "source": "node-22", "sourceHandle": "value", "target": "node-23", "targetHandle": "run_results", "animated": false },
    { "id": "edge-55", "source": "node-1", "sourceHandle": "prompts", "target": "node-23", "targetHandle": "prompts", "animated": false },
    { "id": "edge-56", "source": "node-2", "sourceHandle": "output", "target": "node-23", "targetHandle": "runs", "animated": false },
    { "id": "edge-57", "source": "node-1", "sourceHandle": "repeats", "target": "node-23", "targetHandle": "repeats", "animated": false },

    { "id": "edge-58", "source": "node-23", "sourceHandle": "output", "target": "node-24", "targetHandle": "object", "animated": false },
    { "id": "edge-59", "source": "node-23", "sourceHandle": "exec-out", "target": "node-25", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-60", "source": "node-24", "sourceHandle": "value", "target": "node-25", "targetHandle": "report", "animated": false },
    { "id": "edge-61", "source": "node-23", "sourceHandle": "output", "target": "node-25", "targetHandle": "summary", "animated": false },
    { "id": "edge-62", "source": "node-22", "sourceHandle": "value", "target": "node-25", "targetHandle": "run_results", "animated": false }
  ],
  "entryNode": "node-1",
  "created_at": "2026-01-09T20:05:12.000000",
  "updated_at": "2026-01-09T20:05:12.000000"
}
