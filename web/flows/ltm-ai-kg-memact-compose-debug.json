{
  "id": "ltm-ai-kg-memact-compose-debug",
  "name": "ltm-ai-kg-memact-compose-debug",
  "description": "Compose KG query packets into MemAct CURRENT CONTEXT (per-turn memory reconstruction). Use seed_demo=true for a fast demo seed, or seed_demo=false to query your own previously ingested KG in the selected scope.",
  "interfaces": [],
  "nodes": [
    {
      "id": "node-1",
      "type": "on_flow_start",
      "position": { "x": 96, "y": 96 },
      "data": {
        "nodeType": "on_flow_start",
        "label": "Start",
        "icon": "&#x1F3C1;",
        "headerColor": "#C0392B",
        "inputs": [],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "query_text", "label": "query_text", "type": "string" },
          { "id": "scope", "label": "scope", "type": "string" },
          { "id": "recall_level", "label": "recall_level", "type": "string" },
          { "id": "seed_demo", "label": "seed_demo", "type": "boolean" },
          { "id": "max_input_tokens", "label": "max_input_tokens", "type": "number" },
          { "id": "model", "label": "model", "type": "model" }
        ],
        "pinDefaults": {
          "query_text": "noonien",
          "scope": "run",
          "recall_level": "standard",
          "seed_demo": true,
          "max_input_tokens": 800,
          "model": "qwen/qwen3-next-80b"
        }
      }
    },
    {
      "id": "node-7",
      "type": "if",
      "position": { "x": 304, "y": 96 },
      "data": {
        "nodeType": "if",
        "label": "Seed demo?",
        "icon": "&#x2753;",
        "headerColor": "#F39C12",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "condition", "label": "condition", "type": "boolean" }
        ],
        "outputs": [
          { "id": "true", "label": "true", "type": "execution" },
          { "id": "false", "label": "false", "type": "execution" }
        ]
      }
    },
    {
      "id": "node-2",
      "type": "literal_array",
      "position": { "x": 96, "y": 296 },
      "data": {
        "nodeType": "literal_array",
        "label": "Demo assertions",
        "icon": "&#x1F4CB;",
        "headerColor": "#7F8C8D",
        "inputs": [],
        "outputs": [{ "id": "value", "label": "assertions", "type": "assertions" }],
        "literalValue": [
          {
            "subject": "ex:person-noonien-soong",
            "predicate": "schema:name",
            "object": "doctor noonien soong",
            "observed_at": "2026-01-01T00:00:06Z",
            "provenance": { "span_id": "demo-span" }
          },
          {
            "subject": "ex:person-noonien-soong",
            "predicate": "rdf:type",
            "object": "schema:Person",
            "observed_at": "2026-01-01T00:00:05Z",
            "provenance": { "span_id": "demo-span" }
          },
          {
            "subject": "ex:claim-data-emotion-chip",
            "predicate": "schema:mentions",
            "object": "ex:person-noonien-soong",
            "observed_at": "2026-01-01T00:00:10Z",
            "provenance": { "span_id": "demo-span" }
          },
          {
            "subject": "ex:concept-emotion-chip",
            "predicate": "skos:prefLabel",
            "object": "emotion chip",
            "observed_at": "2026-01-01T00:00:04Z",
            "provenance": { "span_id": "demo-span" }
          },
          {
            "subject": "ex:person-data",
            "predicate": "schema:knowsabout",
            "object": "human behavior",
            "observed_at": "2026-01-01T00:00:11Z",
            "provenance": { "span_id": "demo-span" }
          }
        ]
      }
    },
    {
      "id": "node-3",
      "type": "memory_kg_assert",
      "position": { "x": 384, "y": 296 },
      "data": {
        "nodeType": "memory_kg_assert",
        "label": "KG Assert (demo)",
        "icon": "&#x1F9E0;",
        "headerColor": "#8E44AD",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "assertions", "label": "assertions", "type": "assertions" },
          { "id": "scope", "label": "scope", "type": "string" },
          { "id": "span_id", "label": "span_id", "type": "string" },
          { "id": "owner_id", "label": "owner_id", "type": "string" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "count", "label": "count", "type": "number" },
          { "id": "ok", "label": "ok", "type": "boolean" },
          { "id": "assertion_ids", "label": "assertion_ids", "type": "array" }
        ],
        "pinDefaults": { "scope": "run" }
      }
    },
    {
      "id": "node-4",
      "type": "memory_kg_query",
      "position": { "x": 672, "y": 96 },
      "data": {
        "nodeType": "memory_kg_query",
        "label": "KG Query",
        "icon": "&#x1F50E;",
        "headerColor": "#8E44AD",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "query_text", "label": "query_text", "type": "string" },
          { "id": "subject", "label": "subject", "type": "string" },
          { "id": "predicate", "label": "predicate", "type": "string" },
          { "id": "object", "label": "object", "type": "string" },
          { "id": "since", "label": "since", "type": "string" },
          { "id": "until", "label": "until", "type": "string" },
          { "id": "active_at", "label": "active_at", "type": "string" },
          { "id": "scope", "label": "scope", "type": "string" },
          { "id": "recall_level", "label": "recall_level", "type": "string" },
          { "id": "owner_id", "label": "owner_id", "type": "string" },
          { "id": "min_score", "label": "min_score", "type": "number" },
          { "id": "max_input_tokens", "label": "max_input_tokens", "type": "number" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "limit", "label": "limit", "type": "number" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "items", "label": "items", "type": "assertions" },
          { "id": "count", "label": "count", "type": "number" },
          { "id": "ok", "label": "ok", "type": "boolean" },
          { "id": "packets", "label": "packets", "type": "array" },
          { "id": "active_memory_text", "label": "active_memory_text", "type": "string" },
          { "id": "packed_count", "label": "packed_count", "type": "number" },
          { "id": "dropped", "label": "dropped", "type": "number" },
          { "id": "estimated_tokens", "label": "estimated_tokens", "type": "number" },
          { "id": "raw", "label": "raw", "type": "object" }
        ]
      }
    },
    {
      "id": "node-5",
      "type": "memact_compose",
      "position": { "x": 960, "y": 96 },
      "data": {
        "nodeType": "memact_compose",
        "label": "MemAct Compose",
        "icon": "&#x1F9E9;",
        "headerColor": "#16A085",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "kg_result", "label": "kg_result", "type": "object" },
          { "id": "stimulus", "label": "stimulus", "type": "string" },
          { "id": "marker", "label": "marker", "type": "string" },
          { "id": "max_items", "label": "max_items", "type": "number" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "ok", "label": "ok", "type": "boolean" },
          { "id": "delta", "label": "delta", "type": "object" },
          { "id": "trace", "label": "trace", "type": "object" },
          { "id": "active_memory", "label": "active_memory", "type": "object" },
          { "id": "memact_blocks", "label": "memact_blocks", "type": "array" },
          { "id": "memact_system_prompt", "label": "memact_system_prompt", "type": "string" }
        ],
        "pinDefaults": { "marker": "KG:", "max_items": 12 }
      }
    },
    {
      "id": "node-6",
      "type": "on_flow_end",
      "position": { "x": 1248, "y": 96 },
      "data": {
        "nodeType": "on_flow_end",
        "label": "End",
        "icon": "&#x1F6A9;",
        "headerColor": "#C0392B",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "ok", "label": "ok", "type": "boolean" },
          { "id": "trace", "label": "trace", "type": "object" },
          { "id": "memact_system_prompt", "label": "memact_system_prompt", "type": "string" }
        ],
        "outputs": []
      }
    }
  ],
  "edges": [
    { "id": "e0", "source": "node-1", "sourceHandle": "exec-out", "target": "node-7", "targetHandle": "exec-in", "animated": true },
    { "id": "e0b", "source": "node-1", "sourceHandle": "seed_demo", "target": "node-7", "targetHandle": "condition", "animated": false },
    { "id": "e1b", "source": "node-7", "sourceHandle": "true", "target": "node-3", "targetHandle": "exec-in", "animated": true },
    { "id": "e2", "source": "node-2", "sourceHandle": "value", "target": "node-3", "targetHandle": "assertions", "animated": false },
    { "id": "e3", "source": "node-3", "sourceHandle": "exec-out", "target": "node-4", "targetHandle": "exec-in", "animated": true },
    { "id": "e3b", "source": "node-7", "sourceHandle": "false", "target": "node-4", "targetHandle": "exec-in", "animated": true },
    { "id": "e4", "source": "node-1", "sourceHandle": "query_text", "target": "node-4", "targetHandle": "query_text", "animated": false },
    { "id": "e5", "source": "node-1", "sourceHandle": "scope", "target": "node-4", "targetHandle": "scope", "animated": false },
    { "id": "e6", "source": "node-1", "sourceHandle": "recall_level", "target": "node-4", "targetHandle": "recall_level", "animated": false },
    { "id": "e7", "source": "node-1", "sourceHandle": "max_input_tokens", "target": "node-4", "targetHandle": "max_input_tokens", "animated": false },
    { "id": "e8", "source": "node-1", "sourceHandle": "model", "target": "node-4", "targetHandle": "model", "animated": false },
    { "id": "e9", "source": "node-4", "sourceHandle": "exec-out", "target": "node-5", "targetHandle": "exec-in", "animated": true },
    { "id": "e10", "source": "node-4", "sourceHandle": "raw", "target": "node-5", "targetHandle": "kg_result", "animated": false },
    { "id": "e11", "source": "node-1", "sourceHandle": "query_text", "target": "node-5", "targetHandle": "stimulus", "animated": false },
    { "id": "e12", "source": "node-5", "sourceHandle": "exec-out", "target": "node-6", "targetHandle": "exec-in", "animated": true },
    { "id": "e13", "source": "node-5", "sourceHandle": "ok", "target": "node-6", "targetHandle": "ok", "animated": false },
    { "id": "e14", "source": "node-5", "sourceHandle": "trace", "target": "node-6", "targetHandle": "trace", "animated": false },
    { "id": "e15", "source": "node-5", "sourceHandle": "memact_system_prompt", "target": "node-6", "targetHandle": "memact_system_prompt", "animated": false }
  ],
  "entryNode": "node-1"
}
