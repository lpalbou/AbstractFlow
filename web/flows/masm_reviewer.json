{
  "id": "masm_reviewer",
  "name": "masm_reviewer",
  "description": "MASM role: Reviewer. Runs the test plan and checks the implementation against requirements/plan. Outputs approved + feedback as strict JSON. No Python glue.",
  "nodes": [
    {
      "id": "node-1",
      "type": "on_flow_start",
      "position": { "x": -1024.0, "y": 96.0 },
      "data": {
        "nodeType": "on_flow_start",
        "label": "On Flow Start",
        "icon": "&#x1F3C1;",
        "headerColor": "#C0392B",
        "inputs": [],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "request", "label": "request", "type": "string" },
          { "id": "requirements_md", "label": "requirements_md", "type": "string" },
          { "id": "plan_md", "label": "plan_md", "type": "string" },
          { "id": "tasks", "label": "tasks", "type": "array" },
          { "id": "test_plan", "label": "test_plan", "type": "array" },
          { "id": "coder_summary_md", "label": "coder_summary_md", "type": "string" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" },
          { "id": "workspace_root", "label": "workspace_root", "type": "string" }
        ],
        "pinDefaults": { "max_iterations": 40 }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-2",
      "type": "tools_allowlist",
      "position": { "x": -768.0, "y": 304.0 },
      "data": {
        "nodeType": "tools_allowlist",
        "label": "Review Tools",
        "icon": "&#x1F9F0;",
        "headerColor": "#FF8800",
        "inputs": [],
        "outputs": [{ "id": "tools", "label": "tools", "type": "array" }],
        "literalValue": [
          "list_files",
          "search_files",
          "read_file",
          "execute_command"
        ]
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-3",
      "type": "join",
      "position": { "x": -768.0, "y": 176.0 },
      "data": {
        "nodeType": "join",
        "label": "Join Tasks",
        "icon": "&#x1F517;",
        "headerColor": "#E74C3C",
        "inputs": [
          { "id": "items", "label": "items", "type": "array" },
          { "id": "delimiter", "label": "delimiter", "type": "string" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "pinDefaults": { "delimiter": "\n- " }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-4",
      "type": "join",
      "position": { "x": -768.0, "y": 240.0 },
      "data": {
        "nodeType": "join",
        "label": "Join Test Plan",
        "icon": "&#x1F517;",
        "headerColor": "#E74C3C",
        "inputs": [
          { "id": "items", "label": "items", "type": "array" },
          { "id": "delimiter", "label": "delimiter", "type": "string" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "pinDefaults": { "delimiter": "\n- " }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-5",
      "type": "concat",
      "position": { "x": -512.0, "y": 96.0 },
      "data": {
        "nodeType": "concat",
        "label": "Review Prompt",
        "icon": "&#x2795;",
        "headerColor": "#E74C3C",
        "inputs": [
          { "id": "a", "label": "a", "type": "string" },
          { "id": "b", "label": "b", "type": "string" },
          { "id": "c", "label": "c", "type": "string" },
          { "id": "d", "label": "d", "type": "string" },
          { "id": "e", "label": "e", "type": "string" },
          { "id": "f", "label": "f", "type": "string" },
          { "id": "g", "label": "g", "type": "string" },
          { "id": "h", "label": "h", "type": "string" },
          { "id": "i", "label": "i", "type": "string" },
          { "id": "j", "label": "j", "type": "string" },
          { "id": "k", "label": "k", "type": "string" },
          { "id": "l", "label": "l", "type": "string" },
          { "id": "m", "label": "m", "type": "string" },
          { "id": "n", "label": "n", "type": "string" },
          { "id": "o", "label": "o", "type": "string" },
          { "id": "p", "label": "p", "type": "string" }
        ],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "concatConfig": { "separator": "\n\n" },
        "pinDefaults": {
          "a": "You are the REVIEWER. Verify the implementation against the plan/requirements.\n\nHard rules:\n- Run the TEST PLAN (execute_command). Do not invent results.\n- Be strict: approve only if requirements + tests pass.\n- Do NOT modify files; only inspect and run commands.\n\nReturn STRICT JSON only.",
          "b": "## WORKSPACE_ROOT",
          "d": "## USER REQUEST",
          "f": "## REQUIREMENTS (from Architect)",
          "h": "## PLAN (from Manager)",
          "j": "## TASKS (from Manager)",
          "l": "## TEST PLAN (from Manager)",
          "n": "## CODER SUMMARY (what changed)",
          "p": "## OUTPUT JSON SCHEMA (strict)\n{\n  \"approved\": true,\n  \"summary_md\": \"(review summary)\",\n  \"feedback_md\": \"(actionable fixes if not approved)\",\n  \"tests_ran\": [\"...\"],\n  \"test_results\": \"(short)\",\n  \"notes\": [\"...\"]\n}\n"
        }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-6",
      "type": "agent",
      "position": { "x": -96.0, "y": 96.0 },
      "data": {
        "nodeType": "agent",
        "label": "Reviewer Agent",
        "icon": "&#x1F916;",
        "headerColor": "#4488FF",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "include_context", "label": "use_context", "type": "boolean" },
          { "id": "provider", "label": "provider", "type": "provider" },
          { "id": "model", "label": "model", "type": "model" },
          { "id": "max_iterations", "label": "max_iterations", "type": "number" },
          { "id": "system", "label": "system", "type": "string" },
          { "id": "task", "label": "prompt", "type": "string" },
          { "id": "tools", "label": "tools", "type": "array" },
          { "id": "context", "label": "context", "type": "object" }
        ],
        "outputs": [
          { "id": "exec-out", "label": "", "type": "execution" },
          { "id": "result", "label": "result", "type": "object" },
          { "id": "scratchpad", "label": "scratchpad", "type": "object" }
        ],
        "agentConfig": { "provider": "lmstudio", "model": "qwen/qwen3-next-80b", "max_iterations": 40 },
        "pinDefaults": {
          "include_context": false,
          "system": "You are a strict code reviewer. Verify via tests and evidence. Be concise and actionable."
        }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-7",
      "type": "break_object",
      "position": { "x": 160.0, "y": 96.0 },
      "data": {
        "nodeType": "break_object",
        "label": "Agent Result String",
        "icon": "&#x1F9E9;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "object", "label": "object", "type": "object" }],
        "outputs": [{ "id": "result", "label": "result", "type": "string" }],
        "breakConfig": { "selectedPaths": ["result"] }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-8",
      "type": "parse_json",
      "position": { "x": 416.0, "y": 96.0 },
      "data": {
        "nodeType": "parse_json",
        "label": "Parse JSON",
        "icon": "&#x1F5C2;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "text", "label": "text", "type": "string" }],
        "outputs": [{ "id": "result", "label": "result", "type": "object" }]
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-9",
      "type": "break_object",
      "position": { "x": 672.0, "y": 96.0 },
      "data": {
        "nodeType": "break_object",
        "label": "Break Review",
        "icon": "&#x1F9E9;",
        "headerColor": "#3498DB",
        "inputs": [{ "id": "object", "label": "object", "type": "object" }],
        "outputs": [
          { "id": "approved", "label": "approved", "type": "boolean" },
          { "id": "summary_md", "label": "summary_md", "type": "string" },
          { "id": "feedback_md", "label": "feedback_md", "type": "string" },
          { "id": "tests_ran", "label": "tests_ran", "type": "array" },
          { "id": "test_results", "label": "test_results", "type": "string" },
          { "id": "notes", "label": "notes", "type": "array" }
        ],
        "breakConfig": { "selectedPaths": ["approved", "summary_md", "feedback_md", "tests_ran", "test_results", "notes"] }
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    },
    {
      "id": "node-10",
      "type": "on_flow_end",
      "position": { "x": 928.0, "y": 96.0 },
      "data": {
        "nodeType": "on_flow_end",
        "label": "On Flow End",
        "icon": "&#x23F9;",
        "headerColor": "#C0392B",
        "inputs": [
          { "id": "exec-in", "label": "", "type": "execution" },
          { "id": "approved", "label": "approved", "type": "boolean" },
          { "id": "summary_md", "label": "summary_md", "type": "string" },
          { "id": "feedback_md", "label": "feedback_md", "type": "string" },
          { "id": "tests_ran", "label": "tests_ran", "type": "array" },
          { "id": "test_results", "label": "test_results", "type": "string" },
          { "id": "notes", "label": "notes", "type": "array" },
          { "id": "raw_json", "label": "raw_json", "type": "string" }
        ],
        "outputs": []
      },
      "label": null,
      "icon": null,
      "headerColor": null,
      "inputs": [],
      "outputs": []
    }
  ],
  "edges": [
    { "id": "edge-1", "source": "node-1", "sourceHandle": "tasks", "target": "node-3", "targetHandle": "items", "animated": false },
    { "id": "edge-2", "source": "node-1", "sourceHandle": "test_plan", "target": "node-4", "targetHandle": "items", "animated": false },

    { "id": "edge-3", "source": "node-1", "sourceHandle": "workspace_root", "target": "node-5", "targetHandle": "c", "animated": false },
    { "id": "edge-4", "source": "node-1", "sourceHandle": "request", "target": "node-5", "targetHandle": "e", "animated": false },
    { "id": "edge-5", "source": "node-1", "sourceHandle": "requirements_md", "target": "node-5", "targetHandle": "g", "animated": false },
    { "id": "edge-6", "source": "node-1", "sourceHandle": "plan_md", "target": "node-5", "targetHandle": "i", "animated": false },
    { "id": "edge-7", "source": "node-3", "sourceHandle": "result", "target": "node-5", "targetHandle": "k", "animated": false },
    { "id": "edge-8", "source": "node-4", "sourceHandle": "result", "target": "node-5", "targetHandle": "m", "animated": false },
    { "id": "edge-9b", "source": "node-1", "sourceHandle": "coder_summary_md", "target": "node-5", "targetHandle": "o", "animated": false },

    { "id": "edge-9", "source": "node-1", "sourceHandle": "exec-out", "target": "node-6", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-10", "source": "node-1", "sourceHandle": "provider", "target": "node-6", "targetHandle": "provider", "animated": false },
    { "id": "edge-11", "source": "node-1", "sourceHandle": "model", "target": "node-6", "targetHandle": "model", "animated": false },
    { "id": "edge-12", "source": "node-1", "sourceHandle": "max_iterations", "target": "node-6", "targetHandle": "max_iterations", "animated": false },
    { "id": "edge-13", "source": "node-2", "sourceHandle": "tools", "target": "node-6", "targetHandle": "tools", "animated": false },
    { "id": "edge-14", "source": "node-5", "sourceHandle": "result", "target": "node-6", "targetHandle": "task", "animated": false },

    { "id": "edge-15", "source": "node-6", "sourceHandle": "result", "target": "node-7", "targetHandle": "object", "animated": false },
    { "id": "edge-16", "source": "node-7", "sourceHandle": "result", "target": "node-8", "targetHandle": "text", "animated": false },
    { "id": "edge-17", "source": "node-8", "sourceHandle": "result", "target": "node-9", "targetHandle": "object", "animated": false },

    { "id": "edge-18", "source": "node-6", "sourceHandle": "exec-out", "target": "node-10", "targetHandle": "exec-in", "animated": true },
    { "id": "edge-19", "source": "node-9", "sourceHandle": "approved", "target": "node-10", "targetHandle": "approved", "animated": false },
    { "id": "edge-20", "source": "node-9", "sourceHandle": "summary_md", "target": "node-10", "targetHandle": "summary_md", "animated": false },
    { "id": "edge-21", "source": "node-9", "sourceHandle": "feedback_md", "target": "node-10", "targetHandle": "feedback_md", "animated": false },
    { "id": "edge-22", "source": "node-9", "sourceHandle": "tests_ran", "target": "node-10", "targetHandle": "tests_ran", "animated": false },
    { "id": "edge-23", "source": "node-9", "sourceHandle": "test_results", "target": "node-10", "targetHandle": "test_results", "animated": false },
    { "id": "edge-24", "source": "node-9", "sourceHandle": "notes", "target": "node-10", "targetHandle": "notes", "animated": false },
    { "id": "edge-25", "source": "node-7", "sourceHandle": "result", "target": "node-10", "targetHandle": "raw_json", "animated": false }
  ],
  "entryNode": "node-1",
  "created_at": "2026-01-04T00:00:00Z",
  "updated_at": "2026-01-04T00:00:00Z"
}


