# AbstractFlow

> Diagram-based, durable AI workflows for Python (portable VisualFlow JSON + AbstractRuntime execution).

Use this file as a curated index for LLM/agentic tooling:
- Prefer the Markdown docs in `docs/` for user-facing behavior and stable concepts.
- Use the linked code files as the source of truth for implementation details.
- The `web/` visual editor is a reference/dev app; the published Python package is under `abstractflow/`.

## Start Here

- [README](README.md): What AbstractFlow is + install + quickstarts
- [Getting started](docs/getting-started.md): Programmatic + VisualFlow execution
- [Docs index](docs/README.md): Documentation map

## Formats

- [VisualFlow format](docs/visualflow.md): Portable JSON workflow document
- [VisualFlow schema](abstractflow/visual/models.py): Pydantic models (`VisualFlow`, `NodeType`, `PinType`, â€¦)
- [Interfaces/contracts](abstractflow/visual/interfaces.py): `VisualFlow.interfaces` markers + validation/scaffolding

## Architecture

- [Architecture](docs/architecture.md): How authoring/execution fit together (includes diagram)
- [VisualFlow runtime wiring](abstractflow/visual/executor.py): `create_visual_runner`, integrations, subflows
- [VisualSessionRunner](abstractflow/visual/session_runner.py): session-scoped event listeners (`on_event` / `emit_event`)
- [FlowRunner](abstractflow/runner.py): Execution + output normalization + subworkflow convenience
- [Compiler shim](abstractflow/compiler.py): Delegation to `abstractruntime.visualflow_compiler`

## Web Editor

- [Web editor guide](docs/web-editor.md): Run backend/frontend, storage locations, gateway env vars
- [Backend app](web/backend/main.py): FastAPI app + static serving rules
- [WebSocket execution](web/backend/routes/ws.py): `{type:"run"|"resume"|"control"}` protocol and event stream
- [Frontend scripts](web/frontend/package.json): Vite dev/build commands (ports)

## CLI

- [CLI guide](docs/cli.md): WorkflowBundle commands
- [CLI implementation](abstractflow/cli.py): `abstractflow bundle pack|inspect|unpack`
- [WorkflowBundle helpers](abstractflow/workflow_bundle.py): Delegates to AbstractRuntime bundle format

## Tests

- [Runner tests](tests/test_runner.py): Programmatic FlowRunner behavior
- [Bundle tests](tests/test_workflow_bundle_pack.py): `.flow` packing semantics + compilation checks
- [WebSocket execution tests](tests/test_visual_ws_subflow.py): WS run/resume + subflow waits

## Optional

- [Changelog](CHANGELOG.md)
- [Sample flows](web/flows): Example VisualFlow JSON documents used by the web editor
